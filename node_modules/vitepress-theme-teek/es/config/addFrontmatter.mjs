const createPermalink = (permalinkPrefix = "") => {
  let finalPermalinkPrefix = permalinkPrefix;
  if (!finalPermalinkPrefix.startsWith("/")) finalPermalinkPrefix = "/" + finalPermalinkPrefix;
  if (!finalPermalinkPrefix.endsWith("/")) finalPermalinkPrefix = finalPermalinkPrefix + "/";
  return {
    permalink: `${finalPermalinkPrefix}${(Math.random() + Math.random()).toString(16).slice(2, 8)}`
  };
};
const createCategory = (fileInfo, ignore = []) => {
  const siteConfig = globalThis.VITEPRESS_CONFIG;
  const { locales = {} } = siteConfig.userConfig;
  const relativePathArr = fileInfo.relativePath.split("/");
  const categories = [];
  relativePathArr.forEach((item, index) => {
    const filename = item.replace(/^\d+\./, "").split(".")?.[0] || "";
    if (index !== relativePathArr.length - 1 && !locales[filename] && !ignore.includes(filename))
      categories.push(filename);
  });
  return { categories: categories.length ? categories : [""] };
};

export { createCategory, createPermalink };
